<!DOCTYPE html>
<!-- saved from url=(0051)https://learn.lushaylabs.com/tang-nano-9k-graphics/ -->
<html lang="en" data-theme="dark" class="js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0 shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Tang Nano 9K: OLED Screen 101</title>
<link rel="stylesheet" href="./Tang Nano 9K_ OLED Screen 101_files/tocbot.css">
<style>
			.post-content {
				position: relative;
			}

			.gh-toc > .toc-list {
				position: relative;
			}
			.post-content img {
				margin: auto;
			}
			.single-post .featured-image-wrap {
				margin: 32px auto;
			}
			.single-post .featured-image-wrap img {
				margin: auto;
			}
			.toc-list {
				overflow: hidden;
				list-style: none;
			}
			.post-content ol ol.is-collapsed {
				display: none;
			}
			.header-nav-list a {
				text-transform: uppercase;
			}
			#disqus_thread iframe {
				position: relative !important;
			}
			@media (min-width: 1300px) {
				
				.gh-sidebar {
					position: absolute; 
					top: 0;
					left: -300px;
					width: 300px;    
					font-size: 15px;
					bottom: 0;
					grid-column: wide-start / main-start; /* Place the TOC to the left of the content */
				}
				.gh-toc {
					position: sticky; /* On larger screens, TOC will stay in the same spot on the page */
					top: 4vmin;
				}
				.gh-toc.fixed-bar {
					position: fixed;
					top: 100px;
					transition: opacity 0.5s ease-in-out;
				}
				.gh-toc.fixed-bar.fadeout {
					opacity: 0;
				}
			}

			.gh-toc .is-active-link::before {
				background-color: var(--ghost-accent-color); /* Defines TOC   accent color based on Accent color set in Ghost Admin */
			} 
		</style>
<link rel="preconnect" href="https://fonts.gstatic.com/">
<link href="./Tang Nano 9K_ OLED Screen 101_files/css2" rel="stylesheet"> <link href="./Tang Nano 9K_ OLED Screen 101_files/screen.min.css" rel="stylesheet">
<script async="" src="./Tang Nano 9K_ OLED Screen 101_files/uwt.js.descarga"></script><script>
    if(typeof(Storage) !== 'undefined') {
        let themeMode = document.documentElement.getAttribute('data-theme');
        if (themeMode !== null && themeMode === 'system') {
            setSysPrefColor();
        }
        const theme = localStorage.getItem('selected-theme');
        if (theme == 'light') {
            setColorScheme('light');
        }
        else if (theme == 'dark') {
            setColorScheme('dark');
        }
    }
    function setSysPrefColor() {
        if(window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){
            setColorScheme('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
            if (e.matches) {
                setColorScheme('dark');
            } else {
                setColorScheme('light');
            }
        });
    }
    function setColorScheme(scheme) {
        if (scheme=='dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        } else {
            document.documentElement.removeAttribute('data-theme');
        }
    }
</script> <script>
			document.documentElement.classList.add('js');
			window.onload = function() {
				setTimeout(function() {
					document.body.classList.add('loaded');
				}, 5000);
			}
		</script>
<link rel="icon" href="https://learn.lushaylabs.com/content/images/size/w256h256/2022/07/lushay_profile.png" type="image/png">
<link rel="canonical" href="https://learn.lushaylabs.com/tang-nano-9k-graphics/">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta property="og:site_name" content="Lushay Labs">
<meta property="og:type" content="article">
<meta property="og:title" content="Tang Nano 9K: OLED Screen 101">
<meta property="og:description" content="This is part 3 in our Tang Nano 9K series. In this article we will be starting a mini-project creating an OLED text engine core.

This series will go through the entire process from concept to implementation to demonstrate not just the code but also the design process and considerations">
<meta property="og:url" content="https://learn.lushaylabs.com/tang-nano-9k-graphics/">
<meta property="og:image" content="https://learn.lushaylabs.com/content/images/2023/07/oled.png">
<meta property="article:published_time" content="2022-08-27T14:03:28.000Z">
<meta property="article:modified_time" content="2023-07-15T07:55:59.000Z">
<meta property="article:tag" content="Graphics">
<meta property="article:tag" content="Core">
<meta property="article:tag" content="SPI">
<meta property="article:publisher" content="https://www.facebook.com/ghost">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Tang Nano 9K: OLED Screen 101">
<meta name="twitter:description" content="This is part 3 in our Tang Nano 9K series. In this article we will be starting a mini-project creating an OLED text engine core.

This series will go through the entire process from concept to implementation to demonstrate not just the code but also the design process and considerations">
<meta name="twitter:url" content="https://learn.lushaylabs.com/tang-nano-9k-graphics/">
<meta name="twitter:image" content="https://learn.lushaylabs.com/content/images/2022/08/twitter_screen.jpg">
<meta name="twitter:label1" content="Written by">
<meta name="twitter:data1" content="Lushay Labs">
<meta name="twitter:label2" content="Filed under">
<meta name="twitter:data2" content="Graphics, Core, SPI">
<meta name="twitter:site" content="@ghost">
<meta property="og:image:width" content="1000">
<meta property="og:image:height" content="750">
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Lushay Labs",
        "url": "https://learn.lushaylabs.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://learn.lushaylabs.com/content/images/2023/07/logo.png",
            "width": 223,
            "height": 53
        }
    },
    "author": {
        "@type": "Person",
        "name": "Lushay Labs",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.gravatar.com/avatar/10ed3517b978af5e293dc82668d0edd7?s=250&r=x&d=mp",
            "width": 250,
            "height": 250
        },
        "url": "https://learn.lushaylabs.com/author/lushaylabs/",
        "sameAs": []
    },
    "headline": "Tang Nano 9K: OLED Screen 101",
    "url": "https://learn.lushaylabs.com/tang-nano-9k-graphics/",
    "datePublished": "2022-08-27T14:03:28.000Z",
    "dateModified": "2023-07-15T07:55:59.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://learn.lushaylabs.com/content/images/2023/07/oled.png",
        "width": 1000,
        "height": 750
    },
    "keywords": "Graphics, Core, SPI",
    "description": "This is part 3 in our Tang Nano 9K series. In this article we will be starting a mini-project creating an OLED text engine core.\n\nThis series will go through the entire process from concept to implementation to demonstrate not just the code but also the design process and considerations taken when creating a multi-component system.\n\n * Part 1 (this part) - will be an intro on the HW and creating the base driver so that we can display something to the screen.\n * Part 2 - will go over displaying t",
    "mainEntityOfPage": "https://learn.lushaylabs.com/tang-nano-9k-graphics/"
}
    </script>
<meta name="generator" content="Ghost 5.80">
<link rel="alternate" type="application/rss+xml" title="Lushay Labs" href="https://learn.lushaylabs.com/rss/">
<script defer="" src="./Tang Nano 9K_ OLED Screen 101_files/sodo-search.min.js.descarga" data-key="58b74ad4aaeb2e705b550a576a" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://lushay-labs.ghost.io/" crossorigin="anonymous"></script>
<link href="https://learn.lushaylabs.com/webmentions/receive/" rel="webmention">
<script defer="" src="./Tang Nano 9K_ OLED Screen 101_files/cards.min.js.descarga"></script>
<link rel="stylesheet" type="text/css" href="./Tang Nano 9K_ OLED Screen 101_files/cards.min.css">
<style>
 #disqus_thread {
  max-width: 1000px;
         width: 90%;
  margin: auto;
}  
/**
 * Modded Dracula Theme originally by Zeno Rocha [@zenorocha]
 * https://draculatheme.com/
 *
 * Ported for PrismJS by Albert Vallverdu [@byverdu]
 */
code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282a36}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8a9cd7}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.punctuation,.token.url,.token.variable{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ff79c6}.token.boolean,.token.number{color:#c7a7f6}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#79e681}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#fac88c}.token.keyword{color:#8be9fd}.token.important,.token.regex{color:#ff8585}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

</style>

<script defer="">
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='https://static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
twq('config','obn5s');
</script>
<style>:root {--ghost-accent-color: #0057ff;}</style>
<style type="text/css">#mc_embed_signup input.mce_inline_error { border-color:#6B0505; } #mc_embed_signup div.mce_inline_error { margin: 0 0 1em 0; padding: 5px 10px; background-color:#6B0505; font-weight: bold; z-index: 1; color:#fff; }</style><style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style><style>.App{text-align:center}.App-logo{height:40vmin;pointer-events:none}@media (prefers-reduced-motion: no-preference){.App-logo{animation:App-logo-spin infinite 20s linear}}.App-header{background-color:#282c34;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:calc(10px + 2vmin);color:#fff}.App-link{color:#61dafb}@keyframes App-logo-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
</style></head>
<body class="post-template tag-graphics tag-core tag-spi loaded" data-nav="sticky" data-search="Ghost native search" style="zoom: 1;">
<div class="site-wrap">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="global-icons" style="display:none">
<symbol id="i-search" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.083 17.196l4.526 4.528A1.332 1.332 0 0122.667 24a1.33 1.33 0 01-.943-.39l-4.528-4.527a10.602 10.602 0 01-6.53 2.25C4.787 21.333 0 16.548 0 10.667 0 4.785 4.785 0 10.667 0c5.881 0 10.666 4.785 10.666 10.667 0 2.461-.846 4.724-2.25 6.529zm-8.416-14.53c-4.412 0-8 3.589-8 8 0 4.413 3.588 8 8 8s8-3.587 8-8c0-4.411-3.588-8-8-8z"></path></symbol>
<symbol id="i-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.036 7.976a.75.75 0 00-1.06 1.06L10.939 12l-2.963 2.963a.75.75 0 101.06 1.06L12 13.06l2.963 2.964a.75.75 0 001.061-1.06L13.061 12l2.963-2.964a.75.75 0 10-1.06-1.06L12 10.939 9.036 7.976z"></path><path fill-rule="evenodd" d="M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1zM2.5 12a9.5 9.5 0 1119 0 9.5 9.5 0 01-19 0z"></path></symbol>
<symbol id="i-user" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="person"><rect opacity="0"></rect><path d="M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4z"></path><path d="M18 21a1 1 0 0 0 1-1 7 7 0 0 0-14 0 1 1 0 0 0 1 1z"></path></g></g></symbol>
<symbol id="i-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.228 23.999l.114.001a12.31 12.31 0 008.762-3.624 12.269 12.269 0 002.803-4.315 1.2 1.2 0 00-1.531-1.557c-3.678 1.339-7.836.426-10.593-2.326a10.078 10.078 0 01-2.33-10.564A1.2 1.2 0 007.899.08a12.271 12.271 0 00-4.792 3.292c-4.24 4.722-4.103 12.278.31 16.843A12.311 12.311 0 0012.227 24zM4.892 4.975a9.882 9.882 0 011.65-1.474c-.475 3.772.797 7.633 3.544 10.376 2.75 2.743 6.62 4.008 10.394 3.538-.32.448-.678.87-1.071 1.262A9.932 9.932 0 0112.34 21.6l-.092-.001a9.928 9.928 0 01-7.109-3.053C1.585 14.868 1.473 8.78 4.892 4.975z"></path></symbol>
<symbol id="i-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.8 1.2v2.4a1.2 1.2 0 102.4 0V1.2a1.2 1.2 0 10-2.4 0zM18.876 7.028a1.195 1.195 0 01-1.697-.03 1.2 1.2 0 01.029-1.696l1.727-1.668a1.202 1.202 0 011.668 1.728l-1.727 1.666zM12 16.8c2.647 0 4.8-2.153 4.8-4.8S14.647 7.2 12 7.2A4.805 4.805 0 007.2 12c0 2.647 2.153 4.8 4.8 4.8zM5.124 16.972l-1.727 1.666a1.2 1.2 0 001.668 1.728l1.727-1.668a1.2 1.2 0 00-1.668-1.726zM17.18 17.002c.46-.477 1.22-.49 1.696-.03l1.727 1.666a1.2 1.2 0 01-1.668 1.728l-1.727-1.668a1.2 1.2 0 01-.029-1.696zM12 19.2a1.2 1.2 0 00-1.2 1.2v2.4a1.2 1.2 0 102.4 0v-2.4a1.2 1.2 0 00-1.2-1.2zM5.065 3.634a1.2 1.2 0 00-1.668 1.728l1.727 1.666a1.195 1.195 0 001.697-.03 1.2 1.2 0 00-.029-1.696L5.065 3.634zM3.6 10.8a1.2 1.2 0 110 2.4H1.2a1.2 1.2 0 110-2.4h2.4zM22.8 10.8h-2.4a1.2 1.2 0 100 2.4h2.4a1.2 1.2 0 100-2.4z"></path></symbol>
<symbol id="i-twitter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path></symbol>
<symbol id="i-star" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"></path></symbol>
</svg> <header class="site-header">
<div class="container header-inner justify-space-between">
<div class="header-logo flex">
<a href="https://learn.lushaylabs.com/" class="logo-img theme-light-logo">
<img src="./Tang Nano 9K_ OLED Screen 101_files/logo.png" alt="Lushay Labs">
</a>
<a href="https://learn.lushaylabs.com/" class="logo-img theme-dark-logo">
<img src="./Tang Nano 9K_ OLED Screen 101_files/logo.png" alt="Lushay Labs">
</a>
</div>
<input id="mobile-menu-toggle" class="mobile-menu-checkbox" type="checkbox">
<label for="mobile-menu-toggle" class="mobile-menu-icon" aria-label="menu toggle button">
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="sr-only">Menu toggle button</span>
</label>
<div class="header-right flex" data-theme-icon="true">
<nav class="header-nav" role="navigation" aria-label="Main navigation">
<ul class="header-nav-list no-style-list" role="menu">
<li class="nav-item" role="menuitem">
<a href="https://learn.lushaylabs.com/">Home</a>
</li>
<li class="nav-item" role="menuitem">
<a href="https://learn.lushaylabs.com/tang-nano-series/">Tang Nano 9K Series</a>
</li>
<li class="nav-item" role="menuitem">
<a href="https://learn.lushaylabs.com/vscode-extension/">Lushay Code</a>
</li>
<li class="nav-item" role="menuitem">
<a href="https://store.lushaylabs.com/collections/all-products">Store</a>
</li>
</ul>
</nav>
<div class="icon-items-wrap flex">
<button class="nav-icon search-icon flex" data-ghost-search="" fdprocessedid="1s6yne">
<span><svg><use xlink:href="#i-search"></use></svg></span>
</button>
<a href="javascript:;" class="nav-icon theme-icon flex js-toggle-dark-light" aria-label="Toggle theme">
<div class="toggle-mode flex">
<div class="light"><svg><use xlink:href="#i-sun"></use></svg></div>
<span class="dark"><svg><use xlink:href="#i-moon"></use></svg></span>
</div>
</a>
</div>
</div>
</div>
</header>
<div class="main">
<div class="container">
<div class="row">
<div class="col-lg-10 offset-lg-1">
<article class="single-post">
<header class="post-header">
<h1 class="post-title">
Tang Nano 9K: OLED Screen 101
</h1>
<div class="post-meta flex">
<div class="author-list flex">
<a class="author-image" href="https://learn.lushaylabs.com/author/lushaylabs/" aria-label="Lushay Labs">
<img src="./Tang Nano 9K_ OLED Screen 101_files/10ed3517b978af5e293dc82668d0edd7.png" loading="lazy" alt="Lushay Labs">
</a>
<a href="https://learn.lushaylabs.com/author/lushaylabs/" class="author-name">Lushay Labs</a>&nbsp;
</div>
<time class="post-date" datetime="2022-08-27">Aug 27, 2022</time>
<span class="read-time">19 min read</span>
</div>
</header>
<div class="featured-image-wrap">
<img class="featured-image" loading="lazy" srcset="/content/images/size/w400/2023/07/oled.png 400w,
                                /content/images/size/w600/2023/07/oled.png 600w,
                                /content/images/size/w1000/2023/07/oled.png 1000w," sizes="(max-width: 432px) 400px, (max-width: 696px) 600px, 1000px" src="./Tang Nano 9K_ OLED Screen 101_files/oled.png" alt="Tang Nano 9K: OLED Screen 101">
</div>
<div class="post-content">
<aside class="gh-sidebar"><div class="gh-toc"><ol class="toc-list "><li class="toc-list-item is-active-li"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#the-plan" class="toc-link node-name--H2  is-active-link">The Plan</a></li><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#the-ssd1306-driver" class="toc-link node-name--H2 ">The SSD1306 Driver</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#how-data-is-stored" class="toc-link node-name--H3 ">How Data is Stored</a></li><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#command-bytes" class="toc-link node-name--H3 ">Command Bytes</a></li></ol></li><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#spi" class="toc-link node-name--H2 ">SPI</a></li><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#creating-the-driver-core" class="toc-link node-name--H2 ">Creating the Driver core</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#boilerplate" class="toc-link node-name--H3 ">Boilerplate</a></li></ol></li><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#implementing-the-driver-core" class="toc-link node-name--H2 ">Implementing the Driver Core</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#the-state-machine" class="toc-link node-name--H3 ">The State Machine</a></li></ol></li><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#loading-an-image" class="toc-link node-name--H2 ">Loading An Image</a><ol class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#preparing-the-image-data" class="toc-link node-name--H3 ">Preparing the Image Data</a></li></ol></li><li class="toc-list-item"><a href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#conclusion" class="toc-link node-name--H2 ">Conclusion</a></li></ol></div></aside>
<p>This is part 3 in our Tang Nano 9K series. In this article we will be starting a mini-project creating an OLED text engine core. </p><p>This series will go through the entire process from concept to implementation to demonstrate not just the code but also the design process and considerations taken when creating a multi-component system.</p><ul><li>Part 1 (this part) - will be an intro on the HW and creating the base driver so that we can display something to the screen.</li><li>Part 2 - will go over displaying text on our base OLED core including how to map ascii character codes to the screen data and using custom fonts.</li><li>Part 3 - will wrap up the project taking everything we did in the previous parts in-order to build a reusable dynamic text engine that can be used by other cores to display their own data onto the screen. </li></ul><p>To follow along you will need a Tang Nano 9K and a 128x64 pixel screen with an SSD1306 driver using its 4-wire SPI configuration (the screen itself should have 7 pins). We will be using a 0.96" OLED screen matching these requirements, you can get these along with a breadboard jumpers and the tang nano from our store <a href="https://store.lushaylabs.com/collections/all-products?ref=learn.lushaylabs.com">here</a>.</p><h2 id="the-plan">The Plan</h2><p>In this part we are not going to think about the overall architecture or how the screen will communicate with the rest of the system. We will only be worried about being able to drive the screen using the FPGA - building the physical driver for the OLED screen.</p><p>To do this we first need to better understand how the screen works and how it expects to be communicated with. The screen we are using has an SSD1306 IC driver so we can go over its datasheet to get the information we need.</p>
<div class="kg-card kg-file-card kg-file-card-medium">
<a class="kg-file-card-container" href="https://learn.lushaylabs.com/content/files/2022/08/SSD1306.pdf" title="Download" download="">
<div class="kg-file-card-contents">
<div class="kg-file-card-title">SSD1306</div>
<div class="kg-file-card-metadata">
<div class="kg-file-card-filename">SSD1306.pdf</div>
<div class="kg-file-card-filesize">2 MB</div>
</div>
</div>
<div class="kg-file-card-icon">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><style>.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}</style></defs><title>download-circle</title><polyline class="a" points="8.25 14.25 12 18 15.75 14.25"></polyline><line class="a" x1="12" y1="6.75" x2="12" y2="18"></line><circle class="a" cx="12" cy="12" r="11.25"></circle></svg>
</div>
</a>
</div>
<h2 id="the-ssd1306-driver">The SSD1306 Driver</h2><p>This driver IC is the interface between you and the actual OLED's underlying display. An OLED consists of many LEDs which need to be controlled individually to produce the desired picture. The driver is what connects to these LEDs and provides an interface where you can send it commands or data in-order to update the display. Looking at the block diagram in the datasheet we can see how it works internally:</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/block_diagram.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="1394" height="1506" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/block_diagram.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2022/08/block_diagram.jpg 1000w, https://learn.lushaylabs.com/content/images/2022/08/block_diagram.jpg 1394w" sizes="(min-width: 720px) 720px"></figure><p>Looking at the left side, we have a microcontroller which is what we will be communicating with. The pins we care about are the the first three and D0 and D1, the first three are reset, chip select and data/command flag and D0 is our SPI clock and D1 is our SPI data.</p><p>All the other pins are used for alternate communication methods, like if interfacing with the screen over parallel connection. But since we are using the driver in it's 4-wire SPI mode we only need the 5 pins listed above.</p><p>The MCU receives data from us, and then will decide whether the data is a command meant to control the display, or whether it was pixel data meant to update the contents of the display.</p><p>Pixel data gets stored in the Graphics RAM which stores the contents for the entire display, the RAM propagates through the display driver to the actual pins controlling the individual OLEDs. The benefits of using a screen buffer in ram like this is that the screen can be updated independently of the device controlling it, and also you can just send an update to change a part of the image and the screen will remember the rest of the image.</p><p>If the DC (data/command) flag was set to be a command, then the data will go to the command decoder to process and perform the command that you sent.</p><p>Each "transmission" to the screen is a single byte, and if the data/command pin is set low that byte will be interpreted as a command and if set high the byte will be sent to the graphics ram to the current screen position stored in the ssd1306's memory.</p><h3 id="how-data-is-stored">How Data is Stored</h3><p>The screen itself we are using has 128 x 64 pixels or 8192 individual pixels. The SSD1306 lets us configure how the ram is mapped to the display, but in general each byte controls a vertical line of 8 pixels. This means to control each of the 64 pixels in each column we need to set 8 bytes (again each byte controls 8 vertical pixels). The first byte will control the top left column, then we will increment by one and update the 8 pixels to the right and so on until we wrap around to the second row of 8 pixel columns:</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="./Tang Nano 9K_ OLED Screen 101_files/byte-structure-1.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="2000" height="634" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/byte-structure-1.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2022/08/byte-structure-1.jpg 1000w, https://learn.lushaylabs.com/content/images/size/w1600/2022/08/byte-structure-1.jpg 1600w, https://learn.lushaylabs.com/content/images/size/w2400/2022/08/byte-structure-1.jpg 2400w" sizes="(min-width: 720px) 720px"><figcaption>128 bytes per row 8 rows, each byte controlling 8 vertical pixels</figcaption></figure><p>In the example above we sent 136 bytes with 0xFF (binary 11111111) this will result in the top row of 8 pixels being lit up across the whole screen, and in the first 8 columns we will have the top 16 pixels lit up. The least significant bit is the top pixel and the most significant bit is the bottom in each column, so a byte like 01010111 would create a column of pixels like the following: </p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/pixel-1.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="2000" height="634" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/pixel-1.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2022/08/pixel-1.jpg 1000w, https://learn.lushaylabs.com/content/images/size/w1600/2022/08/pixel-1.jpg 1600w, https://learn.lushaylabs.com/content/images/size/w2400/2022/08/pixel-1.jpg 2400w" sizes="(min-width: 720px) 720px"></figure><h3 id="command-bytes">Command Bytes</h3><p>Like mentioned above the device has a set of commands that we can send it to do certain things. Inside the datasheet linked above we can see multiple tables including commands like the following:</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/command_table-1.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="1748" height="809" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/command_table-1.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2022/08/command_table-1.jpg 1000w, https://learn.lushaylabs.com/content/images/size/w1600/2022/08/command_table-1.jpg 1600w, https://learn.lushaylabs.com/content/images/2022/08/command_table-1.jpg 1748w" sizes="(min-width: 720px) 720px"></figure><p>Each row contains a command and shows the byte or bytes (for multi byte commands) that need to be sent. A 1 or 0 means that bit needs to be a one or zero and when there is a parameter it will be marked with numbered letters and referenced on the right.</p><p>For example to invert the screen (3rd command in the picture) we can see that we need to send 1010011x where the last bit can be either a one or zero. If we set it to a zero the command will set the display to normal mode, where a pixel set to zero will be off and a pixel set to 1 in the ram will be on. If we instead send a 1 as the last bit of the command, the screen will be inverted and a zero in RAM will cause a pixel to be lit up.</p><p>We won't go through all the commands individually but by following the same approach you can decipher the rest of the command tables.</p><p>In order to use the OLED display we first need to perform an initialization sequence where we send it all the commands required to setup all the configuration of the OLED. Once initialized we can start sending it pixel data and see the screen update.</p><p>The last thing we need to go over before getting into the code is to go over the communication protocol itself, which in our case is SPI.</p><h2 id="spi">SPI</h2><p>We will be communicating with the OLED screen over SPI. SPI is a serial protocol where 2 devices communicate with a data line for each direction and a common clock line. There are multiple modes in SPI, depending on whether you read on the rising / falling edge and whether the idle state of the clock is high or low.</p><p>Multiple SPI devices can be connected together over the same wires and then each of the devices will have a separate chip select pin (CS) with which you can choose which device you are currently communicating with.</p><p>With the SSD1306 driver we are using an extra wire to tell the device if the current byte being sent is data or a command. This is not part of the SPI protocol but is part of our communication interface we are building.</p><p>From the datasheet we can see an example of how to communicate with the driver in this 4-wire SPI mode:</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/spi_send.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="1650" height="672" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/spi_send.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2022/08/spi_send.jpg 1000w, https://learn.lushaylabs.com/content/images/size/w1600/2022/08/spi_send.jpg 1600w, https://learn.lushaylabs.com/content/images/2022/08/spi_send.jpg 1650w" sizes="(min-width: 720px) 720px"></figure><p>The first line in the image is the chip select pin. Like mentioned above this pin signifies that we are currently communicating with this device, kind of like an enable pin. We pull it low at the start of our communication and put it back high when done.</p><p>The next line is the Data/Command Flag, this can be either high or low, a high value means it is pixel data and a low value signifying a command.</p><p>The third line just shows a combination of the data / clock pins just to show that multiple bytes can be sent without needing to change the chip select each time.</p><p>Next we have a zoom-in of how a single byte looks when being sent. The first of these lines is the clock pin the second is the data pin. We see here the clock pin can either be high or low while idle, but more importantly we see that the data should be updated on the falling edge and it will be read on the rising edge. We also see that the most significant bit of the byte we are sending should be sent first.</p><p>With all that information we have everything we need to start building a driver core to interface with the OLED display.</p><h2 id="creating-the-driver-core">Creating the Driver core</h2><p>Like always to get started we can create a new project / folder in VSCode containing a constraints file with the tangnano9K pins we will be using, a verilog file for our driver core module and a Makefile to make building easier.</p><h3 id="boilerplate">Boilerplate</h3><p><strong>Constraints File</strong></p><p>For the constraints file we can create a <code>tangnano9k.cst</code> file with the following:</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/screen_contraints.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="2000" height="740" srcset="https://learn.lushaylabs.com/content/images/size/w600/2023/02/screen_contraints.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2023/02/screen_contraints.jpg 1000w, https://learn.lushaylabs.com/content/images/size/w1600/2023/02/screen_contraints.jpg 1600w, https://learn.lushaylabs.com/content/images/2023/02/screen_contraints.jpg 2168w" sizes="(min-width: 720px) 720px"></figure><p>If creating manually it would look like this</p><pre class="language-verilog" tabindex="0"><code class="language-verilog">
IO_LOC <span class="token string">"clk"</span> <span class="token number">52</span><span class="token punctuation">;</span>
IO_PORT <span class="token string">"clk"</span> PULL_MODE<span class="token operator">=</span>UP<span class="token punctuation">;</span>

IO_LOC <span class="token string">"io_cs"</span> <span class="token number">36</span><span class="token punctuation">;</span>
IO_PORT <span class="token string">"io_cs"</span> IO_TYPE<span class="token operator">=</span>LVCMOS33 PULL_MODE<span class="token operator">=</span>DOWN DRIVE<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>
IO_LOC <span class="token string">"io_dc"</span> <span class="token number">39</span><span class="token punctuation">;</span>
IO_PORT <span class="token string">"io_dc"</span> IO_TYPE<span class="token operator">=</span>LVCMOS33 PULL_MODE<span class="token operator">=</span>DOWN DRIVE<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>
IO_LOC <span class="token string">"io_reset"</span> <span class="token number">25</span><span class="token punctuation">;</span>
IO_PORT <span class="token string">"io_reset"</span> IO_TYPE<span class="token operator">=</span>LVCMOS33 PULL_MODE<span class="token operator">=</span>DOWN DRIVE<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>
IO_LOC <span class="token string">"io_sdin"</span> <span class="token number">26</span><span class="token punctuation">;</span>
IO_PORT <span class="token string">"io_sdin"</span> IO_TYPE<span class="token operator">=</span>LVCMOS33 PULL_MODE<span class="token operator">=</span>DOWN DRIVE<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>
IO_LOC <span class="token string">"io_sclk"</span> <span class="token number">27</span><span class="token punctuation">;</span>
IO_PORT <span class="token string">"io_sclk"</span> IO_TYPE<span class="token operator">=</span>LVCMOS33 PULL_MODE<span class="token operator">=</span>DOWN DRIVE<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>

</code></pre><p>We define the clock pin and we define the 5 pins we will need for interfacing with the OLED driver:</p><ol><li>Chip Select <code>io_cs</code></li><li>Data / Command <code>io_dc</code></li><li>Reset Pin <code>io_reset</code></li><li>SPI Data In to OLED <code>io_sdin</code></li><li>SPI clock <code>io_sclk</code></li></ol><p>I chose these pins just because they are consecutive there is no special function and any other 3.3v pins could have been chosen.</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/tang-nano-oled-pins-2.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="335" height="594"></figure><p></p><p><strong>Makefile</strong></p><p>This is only if you are not using the Lushay Code extension and instead run the toolchain manually. For the Makefile just create a file called <code>Makefile</code> with our standard project boilerplate:</p><pre class="language-makefile" tabindex="0"><code class="language-makefile">BOARD<span class="token operator">=</span>tangnano9k
FAMILY<span class="token operator">=</span>GW1N-9C
DEVICE<span class="token operator">=</span>GW1NR-LV9QN88PC6/I5

<span class="token target symbol">all</span><span class="token punctuation">:</span> screen.fs

<span class="token comment"># Synthesis</span>
<span class="token target symbol">screen.json</span><span class="token punctuation">:</span> screen.v
	yosys -p <span class="token string">"read_verilog screen.v; synth_gowin -top screen -json screen.json"</span>

<span class="token comment"># Place and Route</span>
<span class="token target symbol">screen_pnr.json</span><span class="token punctuation">:</span> screen.json
	nextpnr-gowin --json screen.json --freq 27 --write screen_pnr.json --device <span class="token variable">$</span><span class="token punctuation">{</span>DEVICE<span class="token punctuation">}</span> --family <span class="token variable">$</span><span class="token punctuation">{</span>FAMILY<span class="token punctuation">}</span> --cst <span class="token variable">$</span><span class="token punctuation">{</span>BOARD<span class="token punctuation">}</span>.cst

<span class="token comment"># Generate Bitstream</span>
<span class="token target symbol">screen.fs</span><span class="token punctuation">:</span> screen_pnr.json
	gowin_pack -d <span class="token variable">$</span><span class="token punctuation">{</span>FAMILY<span class="token punctuation">}</span> -o screen.fs screen_pnr.json

<span class="token comment"># Program Board</span>
<span class="token target symbol">load</span><span class="token punctuation">:</span> screen.fs
	openFPGALoader -b <span class="token variable">$</span><span class="token punctuation">{</span>BOARD<span class="token punctuation">}</span> screen.fs -f


<span class="token comment"># Generate Simulation</span>
<span class="token target symbol">screen_test.o</span><span class="token punctuation">:</span> screen.v screen_tb.v
	iverilog -o screen_test.o -s test screen.v screen_tb.v

<span class="token comment"># Run Simulation</span>
<span class="token target symbol">test</span><span class="token punctuation">:</span> screen_test.o
	vvp screen_test.o

<span class="token comment"># Cleanup build artifacts</span>
<span class="token target symbol">clean</span><span class="token punctuation">:</span>
	rm screen.vcd screen.fs screen_test.o

<span class="token builtin-target builtin">.PHONY</span><span class="token punctuation">:</span> load clean test
<span class="token builtin-target builtin">.INTERMEDIATE</span><span class="token punctuation">:</span> screen_pnr.json screen.json screen_test.o
</code></pre><p>For a better explanation on this makefile format you can take a look at our installation guide <a href="https://learn.lushaylabs.com/os-toolchain-manual-installation/">here</a> where we go more in depth into this template.</p><h2 id="implementing-the-driver-core">Implementing the Driver Core</h2><p>With the setup out of the way we can start implementing our driver with a verilog module.</p><p>To use the screen like we saw above, we need to first initialize it, it is also recommended to reset the screen after its power stabilizes, this is to make sure it is in its proper reset state. So we will first wait a bit of time, then reset the screen, once reset we will send it all the initialization commands required to set it up and then the screen should be ready to start receiving and displaying pixel data.</p><p>So our state machine will have the following steps:</p><ol><li>Power Initialization Wait / Reset</li><li>Load Init Command Byte</li><li>Send Byte over SPI</li><li>Check Where to go from Sending</li><li>Load Pixel Data Byte</li></ol><p>The first stage will cover the power reset mentioned above, next we will have a state where we load the next command byte in the init sequence.</p><p>Technically the next state would be to send the command byte over SPI, but there is no real difference between sending a command byte or sending a pixel byte so state 3 can be used for both. The only difference is which state to go to after sending the byte. In the case where there are more commands to send we would like to go to the state to load the next command otherwise we want to go to the state to load the next pixel byte. So step 4 will just check if there are more commands and if so go back to step 2 otherwise go to step 5. And step 5 just loads a pixel byte and links back to send it with step 3.</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/states.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="853" height="287" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/states.jpg 600w, https://learn.lushaylabs.com/content/images/2022/08/states.jpg 853w" sizes="(min-width: 720px) 720px"></figure><p>We can create a file called <code>screen.v</code> with the following module outline:</p><pre class="language-verilog" tabindex="0"><code class="language-verilog"><span class="token keyword">module</span> screen
#<span class="token punctuation">(</span>
  <span class="token keyword">parameter</span> STARTUP_WAIT <span class="token operator">=</span> <span class="token number">32'd10000000</span>
<span class="token punctuation">)</span>
<span class="token punctuation">(</span>
    <span class="token keyword">input</span> clk<span class="token punctuation">,</span>
    <span class="token keyword">output</span> io_sclk<span class="token punctuation">,</span>
    <span class="token keyword">output</span> io_sdin<span class="token punctuation">,</span>
    <span class="token keyword">output</span> io_cs<span class="token punctuation">,</span>
    <span class="token keyword">output</span> io_dc<span class="token punctuation">,</span>
    <span class="token keyword">output</span> io_reset
<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">localparam</span> STATE_INIT_POWER <span class="token operator">=</span> <span class="token number">8'd0</span><span class="token punctuation">;</span>
  <span class="token keyword">localparam</span> STATE_LOAD_INIT_CMD <span class="token operator">=</span> <span class="token number">8'd1</span><span class="token punctuation">;</span>
  <span class="token keyword">localparam</span> STATE_SEND <span class="token operator">=</span> <span class="token number">8'd2</span><span class="token punctuation">;</span>
  <span class="token keyword">localparam</span> STATE_CHECK_FINISHED_INIT <span class="token operator">=</span> <span class="token number">8'd3</span><span class="token punctuation">;</span>
  <span class="token keyword">localparam</span> STATE_LOAD_DATA <span class="token operator">=</span> <span class="token number">8'd4</span><span class="token punctuation">;</span>
  
  
<span class="token keyword">endmodule</span></code></pre><p>This is an empty module receiving the inputs we defined in the constraints file and defining the 5 states listed above. <code>STARTUP_WAIT</code> is an external parameter which is the number of clock cycles to wait before resetting the screen. It is an external parameter instead of a local parameter so that in simulation testing we don't have to wait as long.</p><p>Next we can add some registers:</p><pre class="language-verilog" tabindex="0"><code class="language-verilog">  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
  <span class="token keyword">reg</span> dc <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> sclk <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> sdin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> reset <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> cs <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> dataToSend <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> bitNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> pixelCounter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre><p>We need a counter to count clock cycles and a register for the current state. Next we have a register for each of the inputs to drive them. Both the clock and reset pins are high on idle and <code>dc</code> we could have chosen either.</p><p>Finally we have a register for the current byte we will be sending, a register to remember which bit of the current byte we are on and a register to keep track of which pixel of the screen we are on.</p><p>Next let's create a register for holding all the init command bytes. We have a total of 15 init commands which take up a total of 23 bytes (some of the commands are 2 bytes).</p><pre class="language-verilog" tabindex="0"><code class="language-verilog"><span class="token keyword">localparam</span> SETUP_INSTRUCTIONS <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>SETUP_INSTRUCTIONS<span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> startupCommands <span class="token operator">=</span> <span class="token operator">{</span>
    <span class="token number">8'hAE</span><span class="token punctuation">,</span>  <span class="token comment">// display off</span>

    <span class="token number">8'h81</span><span class="token punctuation">,</span>  <span class="token comment">// contast value to 0x7F according to datasheet</span>
    <span class="token number">8'h7F</span><span class="token punctuation">,</span>  

    <span class="token number">8'hA6</span><span class="token punctuation">,</span>  <span class="token comment">// normal screen mode (not inverted)</span>

    <span class="token number">8'h20</span><span class="token punctuation">,</span>  <span class="token comment">// horizontal addressing mode</span>
    <span class="token number">8'h00</span><span class="token punctuation">,</span>  

    <span class="token number">8'hC8</span><span class="token punctuation">,</span>  <span class="token comment">// normal scan direction</span>

    <span class="token number">8'h40</span><span class="token punctuation">,</span>  <span class="token comment">// first line to start scanning from</span>

    <span class="token number">8'hA1</span><span class="token punctuation">,</span>  <span class="token comment">// address 0 is segment 0</span>

    <span class="token number">8'hA8</span><span class="token punctuation">,</span>  <span class="token comment">// mux ratio</span>
    <span class="token number">8'h3f</span><span class="token punctuation">,</span>  <span class="token comment">// 63 (64 -1)</span>

    <span class="token number">8'hD3</span><span class="token punctuation">,</span>  <span class="token comment">// display offset</span>
    <span class="token number">8'h00</span><span class="token punctuation">,</span>  <span class="token comment">// no offset</span>

    <span class="token number">8'hD5</span><span class="token punctuation">,</span>  <span class="token comment">// clock divide ratio</span>
    <span class="token number">8'h80</span><span class="token punctuation">,</span>  <span class="token comment">// set to default ratio/osc frequency</span>

    <span class="token number">8'hD9</span><span class="token punctuation">,</span>  <span class="token comment">// set precharge</span>
    <span class="token number">8'h22</span><span class="token punctuation">,</span>  <span class="token comment">// switch precharge to 0x22 default</span>

    <span class="token number">8'hDB</span><span class="token punctuation">,</span>  <span class="token comment">// vcom deselect level</span>
    <span class="token number">8'h20</span><span class="token punctuation">,</span>  <span class="token comment">// 0x20 </span>

    <span class="token number">8'h8D</span><span class="token punctuation">,</span>  <span class="token comment">// charge pump config</span>
    <span class="token number">8'h14</span><span class="token punctuation">,</span>  <span class="token comment">// enable charge pump</span>

    <span class="token number">8'hA4</span><span class="token punctuation">,</span>  <span class="token comment">// resume RAM content</span>

    <span class="token number">8'hAF</span>   <span class="token comment">// display on</span>
  <span class="token operator">}</span><span class="token punctuation">;</span>
  <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> commandIndex <span class="token operator">=</span> SETUP_INSTRUCTIONS <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">;</span></code></pre><p>Besides for the init commands we also have a register which will remember which command we are currently on. Because the concat operator <code>{</code> and <code>}</code> place the most significant byte first, the first byte we write is actually placed at the end. We could have reversed the order we wrote the init commands and then started <code>commandIndex</code> at zero, but I think it is clearer to write the commands in order and then just start the current bit index at the last bit number.</p><p>Next let's connect all the input wires to the registers we created for them. We could have also added the keyword <code>reg</code> to the input parameters themselves in which case it would have automatically created a register for us, but to make it more pronounced I separated it into two steps.</p><pre class="language-verilog" tabindex="0"><code class="language-verilog">  <span class="token keyword">assign</span> io_sclk <span class="token operator">=</span> sclk<span class="token punctuation">;</span>
  <span class="token keyword">assign</span> io_sdin <span class="token operator">=</span> sdin<span class="token punctuation">;</span>
  <span class="token keyword">assign</span> io_dc <span class="token operator">=</span> dc<span class="token punctuation">;</span>
  <span class="token keyword">assign</span> io_reset <span class="token operator">=</span> reset<span class="token punctuation">;</span>
  <span class="token keyword">assign</span> io_cs <span class="token operator">=</span> cs<span class="token punctuation">;</span></code></pre><h3 id="the-state-machine">The State Machine</h3><p>For the state machine, let's work only on the rising edge of our clock to make things simpler.</p><pre class="language-verilog" tabindex="0"><code class="language-verilog">  <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span> <span class="token keyword">begin</span>
    <span class="token keyword">case</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span>
    	<span class="token comment">// states here</span>
    <span class="token keyword">endcase</span>
  <span class="token keyword">end</span></code></pre><p>Next let's go through each of the states of our state machine one by one:</p><p><strong>Power Init</strong></p><pre class="language-verilog" tabindex="0"><code class="language-verilog">STATE_INIT_POWER<span class="token punctuation">:</span> <span class="token keyword">begin</span>
    counter <span class="token operator">&lt;=</span> counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">&lt;</span> STARTUP_WAIT<span class="token punctuation">)</span>
        reset <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">&lt;</span> STARTUP_WAIT <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
        reset <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">&lt;</span> STARTUP_WAIT <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>
        reset <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">begin</span>
        state <span class="token operator">&lt;=</span> STATE_LOAD_INIT_CMD<span class="token punctuation">;</span>
        counter <span class="token operator">&lt;=</span> <span class="token number">32'b0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre><p>Here we start with the reset set to 1 which is it's idle state and we wait a bit of time for the power to become stable. Then we wait the same period again this time reseting the screen by pulling the reset pin low. Finally we return the pin to high wait again a small amount to make sure the screen is ready to start receiving commands and move onto the next state resetting the counter to zero.</p><p>The default <code>STARTUP_WAIT</code> is set to 10,000,000 so with a 27Mhz crystal we are looking at about a third of a second per step so for all three steps about a second.</p><p><strong>Load Init Command</strong></p><pre class="language-verilog" tabindex="0"><code class="language-verilog">STATE_LOAD_INIT_CMD<span class="token punctuation">:</span> <span class="token keyword">begin</span>
    dc <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dataToSend <span class="token operator">&lt;=</span> startupCommands<span class="token punctuation">[</span><span class="token punctuation">(</span>commandIndex<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">:</span><span class="token number">8'd8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    state <span class="token operator">&lt;=</span> STATE_SEND<span class="token punctuation">;</span>
    bitNumber <span class="token operator">&lt;=</span> <span class="token number">3'd7</span><span class="token punctuation">;</span>
    cs <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    commandIndex <span class="token operator">&lt;=</span> commandIndex <span class="token operator">-</span> <span class="token number">8'd8</span><span class="token punctuation">;</span>
<span class="token keyword">end</span></code></pre><p>Here we set the data / command bit to zero to signify that we are sending a command. We load the next command from the register we created with all the init command bytes. The syntax used here with the minus sign after the MSB tells it that we will not be placing the least significant bit but instead the length.</p><p>Usually we use the syntax <code>[MSB:LSB]</code> to access memory here we are using <code>[MSB-:LEN]</code> there is also the option with the a plus instead of a minus for <code>[LSB+:LEN]</code></p><p>Next we set the state to the send state as that is where we want to go next after loading a command byte. We set the bit number to the last bit as we saw from the datasheet we are sending most significant bit first in the SPI communication.</p><p>Chip select is also set low to tell the screen we want to communicate with it now which essentially enables the screen to receive data over the SPI connection. The last line decrement the <code>commandIndex</code> by 8 as we have handled those 8 bits by loading them into <code>dataToSend</code>.</p><p><strong>Sending a byte</strong></p><pre class="language-verilog" tabindex="0"><code class="language-verilog">STATE_SEND<span class="token punctuation">:</span> <span class="token keyword">begin</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">==</span> <span class="token number">32'd0</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        sclk <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        sdin <span class="token operator">&lt;=</span> dataToSend<span class="token punctuation">[</span>bitNumber<span class="token punctuation">]</span><span class="token punctuation">;</span>
        counter <span class="token operator">&lt;=</span> <span class="token number">32'd1</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    <span class="token keyword">else</span> <span class="token keyword">begin</span>
        counter <span class="token operator">&lt;=</span> <span class="token number">32'd0</span><span class="token punctuation">;</span>
        sclk <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bitNumber <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            state <span class="token operator">&lt;=</span> STATE_CHECK_FINISHED_INIT<span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            bitNumber <span class="token operator">&lt;=</span> bitNumber <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre><p>In order to simplify the implementation we will only be using the rising edge of our own clock, but the clock signal in SPI requires us to do things on both the rising and falling edge of the clock. So to get around this we will just use two of our clock cycles for each bit, one where the SPI clock will be pulled low and one where the SPI clock will be pulled high.</p><p>In the first block we are setting the SPI clock low, and from the datasheet we saw we are supposed to change the data on the SPI data pin on the falling edge so we do that as-well.</p><p>On the second clock cycle of this state we will then reset the counter and pull the clock high, pulling it high will tell the screen to read the bit that we put on the data pin in the previous clock cycle. Lastly we check if we are already on the last bit, if so we go on to the next state, otherwise we decrement the <code>bitNumber</code> register to move to the next bit and continue sending in the current state.</p><p><strong>Check Finished Init</strong></p><pre class="language-verilog" tabindex="0"><code class="language-verilog">STATE_CHECK_FINISHED_INIT<span class="token punctuation">:</span> <span class="token keyword">begin</span>
    cs <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>commandIndex <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        state <span class="token operator">&lt;=</span> STATE_LOAD_DATA<span class="token punctuation">;</span> 
    <span class="token keyword">else</span>
        state <span class="token operator">&lt;=</span> STATE_LOAD_INIT_CMD<span class="token punctuation">;</span> 
<span class="token keyword">end</span></code></pre><p>In this stage we are pulling the chip select high to tell the screen we are finished (not mandatory as we could have sent multiple bytes on the same chip select pulse). Next we check if <code>commandIndex</code> is 0 which would mean we sent all the commands and can move from here to loading the next pixel byte, otherwise go back and load the next command byte.</p><p><strong>Load Pixel Data</strong></p><pre class="language-verilog" tabindex="0"><code class="language-verilog">STATE_LOAD_DATA<span class="token punctuation">:</span> <span class="token keyword">begin</span>
    pixelCounter <span class="token operator">&lt;=</span> pixelCounter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    cs <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dc <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    bitNumber <span class="token operator">&lt;=</span> <span class="token number">3'd7</span><span class="token punctuation">;</span>
    state <span class="token operator">&lt;=</span> STATE_SEND<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pixelCounter <span class="token operator">&lt;</span> <span class="token number">136</span><span class="token punctuation">)</span>
        dataToSend <span class="token operator">&lt;=</span> <span class="token number">8'b01010111</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        dataToSend <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">end</span></code></pre><p>The last state loads the pixel bytes one at a time. We start by incrementing the <code>pixelCounter</code> to track which screen pixels we are. Next we set chip select to zero to re-enable the screen communication. Data / Command flag is set to 1 to signify we will be sending data now not commands.</p><p>Next we reset the bit number back to the last bit and the state we set back to the "send byte" state to send the next pixel byte.</p><p>We don't currently have any image to display, so as an example to make sure everything is working we can simply use the byte example from above as a test where we send the screen 136 bytes of 01010111.</p><p>We never need to reset pixelCounter since there are exactly 1024 bytes which exactly fits into 10 bits, so the <code>pixelCounter</code> register will automatically roll-over back to zero on its own.</p><p>That should be everything required to get the screen working, programming the Tang Nano 9K by clicking on the "FPGA Toolchain" button from the bottom bar and then selecting "Build and Program" from the menu. (Or <code>make load</code> if running manually). With our tangnano programmed you should get something like the following:</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/IMG_5705.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="2000" height="1500" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/IMG_5705.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2022/08/IMG_5705.jpg 1000w, https://learn.lushaylabs.com/content/images/size/w1600/2022/08/IMG_5705.jpg 1600w, https://learn.lushaylabs.com/content/images/size/w2400/2022/08/IMG_5705.jpg 2400w" sizes="(min-width: 720px) 720px"></figure><h2 id="loading-an-image">Loading An Image</h2><p>In terms of Verilog, loading an image instead of our two static rows of lines is pretty easy. We first need a memory where we can store all our bytes:</p><pre class="language-verilog" tabindex="0"><code class="language-verilog"><span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> screenBuffer <span class="token punctuation">[</span><span class="token number">1023</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">initial</span> <span class="token kernel-function property">$readmemh</span><span class="token punctuation">(</span><span class="token string">"image.hex"</span><span class="token punctuation">,</span> screenBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Our memory has 1024 slots each of which hold a single byte. The second lines tells the toolchain to load a file called <code>image.hex</code> into this memory.</p><p>And then we can change the last if / else of our load pixel state to the following:</p><pre class="language-verilog" tabindex="0"><code class="language-verilog">dataToSend <span class="token operator">&lt;=</span> screenBuffer<span class="token punctuation">[</span>pixelCounter<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>So our entire state should look like this:</p><pre class="language-verilog" tabindex="0"><code class="language-verilog">STATE_LOAD_DATA<span class="token punctuation">:</span> <span class="token keyword">begin</span>
    pixelCounter <span class="token operator">&lt;=</span> pixelCounter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    cs <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dc <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    bitNumber <span class="token operator">&lt;=</span> <span class="token number">3'd7</span><span class="token punctuation">;</span>
    state <span class="token operator">&lt;=</span> STATE_SEND<span class="token punctuation">;</span>
    dataToSend <span class="token operator">&lt;=</span> screenBuffer<span class="token punctuation">[</span>pixelCounter<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">end</span></code></pre><p>Some would say the code is even simpler now. The trouble comes more in how to create the file <code>image.hex</code>. We know each byte needs to represent 8 vertical pixels and we need to scan across the image from the top left in rows of 8 pixels. So the task of loading an image is more a task of converting an image into the format we need in-order to display it. Luckily we can create a simple node.js script to do the conversion for us.</p><h3 id="preparing-the-image-data">Preparing the Image Data</h3><p>To begin with we first need a png image with the same size as the screen - 128 x 64 pixels in size. Since the screen only has a single color we will only be using the transparency value of a PNG image to determine whether or not to turn on a pixel.</p><p>To convert our image we will be using a node.js library to parse the image called <code>pngjs</code>. To install the library you can run the following command from the project directory:</p><pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">npm</span> i pngjs</code></pre><p>Next let's create a script called <code>generate_image.js</code> with the following:</p><pre class="language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">PNG</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"pngjs"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">PNG</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">"image.png"</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PNG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"parsed"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span> y<span class="token operator">+=</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span> x<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> byte <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> idx <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token punctuation">(</span>y<span class="token operator">+</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>idx<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">128</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                byte <span class="token operator">=</span> <span class="token punctuation">(</span>byte <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                byte <span class="token operator">=</span> <span class="token punctuation">(</span>byte <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        bytes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>byte<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> hexData <span class="token operator">=</span> bytes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'16'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'image.hex'</span><span class="token punctuation">,</span> hexData<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>We start by including the library along with the filesystem package to load the file.</p><p>The next line creates a read stream to load the image (named <code>image.png</code>) and then pipes it to a PNG instance from the <code>pngjs</code> library and the next block will be called once the entire image is ready and loaded in memory.</p><p>Inside this <code>parsed</code> block we have three nested <code>for</code> loops, the outer one is to go over the vertical lines, as you can see from the end of the line, we skip each time by 8 lines as each 8 lines are stored in a single byte.</p><p>The next <code>for</code> loop is for going through all the columns nothing special here. The final <code>for</code> loop is for incrementing through each of the 8 pixels in a vertical column. Each time we complete the inner-loop it means we have gone through 8 vertical pixels and we can store a new byte moving onto the next vertical column in our row.</p><p>We start the internal loop at the last bit so that we can shift each of the bits into <code>byte</code> from the right.</p><p>Going through the internal loop we are simply getting the index for the current pixel. <code>this.data</code> is a long array of bytes where for each pixel we have 4 bytes, one for red, one for green, one for blue and one for the alpha channel. So the first line calculates this offset by figuring out which byte we are, this is the number of complete rows (or y offset) multiplied by 128 (the screen width) plus the current x offset. We then multiply by 4 since each pixel is 4 bytes (RGBA).</p><p>Once we have the offset we check if the transparency (or 4th byte in our 4 byte pixel) is greater then 128 (out of 256) so if it is 50% or more transparent we will put a zero and the pixel will be turned off, otherwise we will put a 1 and the pixel will be highlighted.</p><p>Other then that we have these two lines:</p><pre class="language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">const</span> hexData <span class="token operator">=</span> bytes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> b<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">'16'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'image.hex'</span><span class="token punctuation">,</span> hexData<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Where we take each of our bytes and convert them to hex (base 16) and we pad them from the left with zeros so that each byte will be exactly 2 hex characters.</p><p>The final line outputs the hex data into a file called <code>image.hex</code> separating each hex byte with a space.</p><p>With our hex file created and our code updated we should be able to reprogram our FPGA and get something like the following:</p><figure class="kg-card kg-image-card"><img src="./Tang Nano 9K_ OLED Screen 101_files/screen_with_image.jpg" class="kg-image medium-zoom-image" alt="" loading="lazy" width="2000" height="951" srcset="https://learn.lushaylabs.com/content/images/size/w600/2022/08/screen_with_image.jpg 600w, https://learn.lushaylabs.com/content/images/size/w1000/2022/08/screen_with_image.jpg 1000w, https://learn.lushaylabs.com/content/images/size/w1600/2022/08/screen_with_image.jpg 1600w, https://learn.lushaylabs.com/content/images/size/w2400/2022/08/screen_with_image.jpg 2400w" sizes="(min-width: 720px) 720px"></figure><h2 id="conclusion">Conclusion</h2><p>In this part we have created the physical driver core to interface with the 0.96" OLED display and we have covered loading a simple image to it. In the next part we will take it a step further and "generate" the screen buffer on chip by converting ascii text into pixels implementing text and fonts into our core.</p><p>Thank you for reading, if you have any questions or comments feel free to leave them below or message us on twitter <a href="https://twitter.com/LushayLabs?ref=learn.lushaylabs.com">here</a>.</p><p>To get any of the items used in this tutorial like the screen / tang nano or breadboard you can go to our store <a href="https://store.lushaylabs.com/collections/all-products?ref=learn.lushaylabs.com">here</a> .</p><p>As always all the examples can be found on github by following this <a href="https://github.com/lushaylabs/tangnano9k-series-examples?ref=learn.lushaylabs.com">link</a></p>
</div>
<div class="post-footer">
<div class="tag-wrap">
<a href="https://learn.lushaylabs.com/tag/graphics/">Graphics</a>
<a href="https://learn.lushaylabs.com/tag/core/">Core</a>
<a href="https://learn.lushaylabs.com/tag/spi/">SPI</a>
</div>
<div class="share-wrap">
<div class="share-title h5 text-center">Share this article:</div>
<div class="share-links flex">
<a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learn.lushaylabs.com/tang-nano-9k-graphics/" onclick="window.open(this.href, &#39;facebook-share&#39;,&#39;width=580,height=296&#39;);return false;" title="Share on Facebook"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"></path></svg></a>
<a class="twitter" href="https://twitter.com/share?text=Tang%20Nano%209K%3A%20OLED%20Screen%20101&amp;url=https://learn.lushaylabs.com/tang-nano-9k-graphics/" onclick="window.open(this.href, &#39;twitter-share&#39;, &#39;width=580,height=296&#39;);return false;" title="Share on Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path></svg></a>
<a class="pinterest" href="http://pinterest.com/pin/create/button/?url=https://learn.lushaylabs.com/tang-nano-9k-graphics/&amp;media=https://learn.lushaylabs.com/content/images/2023/07/oled.png&amp;description=Tang%20Nano%209K%3A%20OLED%20Screen%20101" onclick="window.open(this.href, &#39;linkedin-share&#39;, &#39;width=580,height=296&#39;);return false;" title="Share on Pinterest"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.372-12 12 0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146 1.124.347 2.317.535 3.554.535 6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z" fill-rule="evenodd" clip-rule="evenodd"></path></svg></a>
<a class="whatsapp" href="whatsapp://send?text=https://learn.lushaylabs.com/tang-nano-9k-graphics/" data-action="share/whatsapp/share" onclick="window.open(this.href, &#39;linkedin-share&#39;, &#39;width=580,height=296&#39;);return false;" title="Share on Whatsapp"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"></path></svg></a>
<a class="linkedin" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://learn.lushaylabs.com/tang-nano-9k-graphics/&amp;title=Tang%20Nano%209K%3A%20OLED%20Screen%20101" onclick="window.open(this.href, &#39;linkedin-share&#39;, &#39;width=580,height=296&#39;);return false;" title="Share on Linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path></svg></a>
<a class="link" href="mailto:?subject=Tang%20Nano%209K%3A%20OLED%20Screen%20101&amp;body=https://learn.lushaylabs.com/tang-nano-9k-graphics/" title="Send via email" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 3v18h24v-18h-24zm6.623 7.929l-4.623 5.712v-9.458l4.623 3.746zm-4.141-5.929h19.035l-9.517 7.713-9.518-7.713zm5.694 7.188l3.824 3.099 3.83-3.104 5.612 6.817h-18.779l5.513-6.812zm9.208-1.264l4.616-3.741v9.348l-4.616-5.607z"></path></svg></a>
<a class="link js-copy-link" href="https://learn.lushaylabs.com/tang-nano-9k-graphics/#" onclick="return false;" data-clipboard-text="https://learn.lushaylabs.com/tang-nano-9k-graphics/" title="Copy the permalink" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z"></path></svg></a>
</div>
<div class="js-notification-copy-link text-center"><span>The link has been Copied to clipboard!</span></div>
</div> </div>
</article>
<div class="prev-nex-wrap">
<div class="row">
<div class="col-md-6">
<div class="post prev-post">
<a href="https://learn.lushaylabs.com/tang-nano-9k-creating-a-text-engine/" class="flex">
<div class="featured-image">
<img src="./Tang Nano 9K_ OLED Screen 101_files/text.png" loading="lazy" alt="Tang Nano 9K: Creating a Text Engine">
</div>
<div class="content-wrap">
<div class="nav-text">Newer article</div>
<h4 class="title h5">Tang Nano 9K: Creating a Text Engine</h4>
<div class="post-meta">
<time class="post-date" datetime="2022-09-03">Sep 03, 2022</time>
<span class="read-time">16 min read</span>
</div>
</div>
</a>
</div>
</div>
<div class="col-md-6">
<div class="post next-post">
<a href="https://learn.lushaylabs.com/tang-nano-9k-debugging/" class="flex">
<div class="featured-image">
<img src="./Tang Nano 9K_ OLED Screen 101_files/uart2.png" loading="lazy" alt="Tang Nano 9K: Debugging &amp; UART">
</div>
<div class="content-wrap">
<div class="nav-text">Older article</div>
<h4 class="title h5">Tang Nano 9K: Debugging &amp; UART</h4>
<div class="post-meta">
<time class="post-date" datetime="2022-08-20">Aug 20, 2022</time>
<span class="read-time">23 min read</span>
</div>
</div>
</a>
</div>
</div>
</div>
</div> </div>
</div>
</div>
</div>
<div class="container">
<div class="related-posts-wrap">
<h3 class="section-title h5 text-center">You might also like</h3>
<div class="row">
<div class="col-lg-3 col-md-4 col-sm-6">
<article class="related-post-card" data-id="">
<a href="https://learn.lushaylabs.com/i2c-adc-micro-procedures/" class="post-img-wrap">
<img class="post-img" loading="lazy" srcset="/content/images/size/w250/2023/07/i2c.png 250w,
                                /content/images/size/w400/2023/07/i2c.png 400w,
                                /content/images/size/w600/2023/07/i2c.png 600w,
                                /content/images/size/w1000/2023/07/i2c.png 1000w," sizes="(max-width: 432px) 400px, (max-width: 575px) 600px, (max-width: 628px) 250px, 400px" src="./Tang Nano 9K_ OLED Screen 101_files/i2c.png" alt="Tang Nano 9K: I2C, ADC and Micro Procedures">
</a>
<div class="post-info-wrap">
<h2 class="h5 post-title"><a href="https://learn.lushaylabs.com/i2c-adc-micro-procedures/">Tang Nano 9K: I2C, ADC and Micro Procedures</a></h2>
<div class="post-meta">
<time class="post-date" datetime="2022-11-26">Nov 26, 2022</time>
<span class="read-time">37 min read</span>
</div>
</div>
</article>
</div>
<div class="col-lg-3 col-md-4 col-sm-6">
<article class="related-post-card" data-id="">
<a href="https://learn.lushaylabs.com/tang-nano-9k-reading-the-external-flash/" class="post-img-wrap">
<img class="post-img" loading="lazy" srcset="/content/images/size/w250/2023/07/flash.png 250w,
                                /content/images/size/w400/2023/07/flash.png 400w,
                                /content/images/size/w600/2023/07/flash.png 600w,
                                /content/images/size/w1000/2023/07/flash.png 1000w," sizes="(max-width: 432px) 400px, (max-width: 575px) 600px, (max-width: 628px) 250px, 400px" src="./Tang Nano 9K_ OLED Screen 101_files/flash.png" alt="Tang Nano 9K: Reading the External Flash">
</a>
<div class="post-info-wrap">
<h2 class="h5 post-title"><a href="https://learn.lushaylabs.com/tang-nano-9k-reading-the-external-flash/">Tang Nano 9K: Reading the External Flash</a></h2>
<div class="post-meta">
<time class="post-date" datetime="2022-09-18">Sep 18, 2022</time>
<span class="read-time">23 min read</span>
</div>
</div>
</article>
</div>
<div class="col-lg-3 col-md-4 col-sm-6">
<article class="related-post-card" data-id="">
<a href="https://learn.lushaylabs.com/tang-nano-9k-composite-video/" class="post-img-wrap">
<img class="post-img" loading="lazy" srcset="/content/images/size/w250/2023/09/composite-video.png 250w,
                                /content/images/size/w400/2023/09/composite-video.png 400w,
                                /content/images/size/w600/2023/09/composite-video.png 600w,
                                /content/images/size/w1000/2023/09/composite-video.png 1000w," sizes="(max-width: 432px) 400px, (max-width: 575px) 600px, (max-width: 628px) 250px, 400px" src="./Tang Nano 9K_ OLED Screen 101_files/composite-video.png" alt="Tang Nano 9K: Composite Video">
</a>
<div class="post-info-wrap">
<h2 class="h5 post-title"><a href="https://learn.lushaylabs.com/tang-nano-9k-composite-video/">Tang Nano 9K: Composite Video</a></h2>
<div class="post-meta">
<time class="post-date" datetime="2023-09-04">Sep 04, 2023</time>
<span class="read-time">35 min read</span>
</div>
</div>
</article>
</div>
<div class="col-lg-3 col-md-4 col-sm-6">
<article class="related-post-card" data-id="">
<a href="https://learn.lushaylabs.com/tang-nano-9k-first-processor/" class="post-img-wrap">
<img class="post-img" loading="lazy" srcset="/content/images/size/w250/2023/07/cpu.png 250w,
                                /content/images/size/w400/2023/07/cpu.png 400w,
                                /content/images/size/w600/2023/07/cpu.png 600w,
                                /content/images/size/w1000/2023/07/cpu.png 1000w," sizes="(max-width: 432px) 400px, (max-width: 575px) 600px, (max-width: 628px) 250px, 400px" src="./Tang Nano 9K_ OLED Screen 101_files/cpu.png" alt="Tang Nano 9K: Our First CPU">
</a>
<div class="post-info-wrap">
<h2 class="h5 post-title"><a href="https://learn.lushaylabs.com/tang-nano-9k-first-processor/">Tang Nano 9K: Our First CPU</a></h2>
<div class="post-meta">
<time class="post-date" datetime="2023-01-07">Jan 07, 2023</time>
<span class="read-time">36 min read</span>
</div>
</div>
</article>
</div>
</div>
</div>
</div>
<section class="email-subs">
<div class="container">
<div class="email-subs-wrap text-center">
<div class="icon">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 122 55"><path d="M80.265 5.637a1.563 1.563 0 000 3.125h.045a1.563 1.563 0 000-3.125h-.045zM59.345 43.791a1.563 1.563 0 000 3.126h24.623a1.563 1.563 0 100-3.126H59.345z"></path><path fill-rule="evenodd" d="M44.922 0h72.763a4.172 4.172 0 014.159 4.158v45.737a4.17 4.17 0 01-4.158 4.158H44.922a4.17 4.17 0 01-4.158-4.158V4.158A4.17 4.17 0 0144.922 0zm38.774 27.442l16.523-12.393h-5.43a1.563 1.563 0 010-3.126h9.597l4.215-3.161H86.715a1.563 1.563 0 010-3.125h25.328c.204 0 .399.039.578.11l3.504-2.629H46.482l32.43 24.324c.583.444 1.478.722 2.392.718.913.004 1.808-.274 2.392-.718zm6.451-.942l-4.582 3.437c-1.247.929-2.765 1.338-4.262 1.34-1.498-.003-3.015-.412-4.261-1.34L72.46 26.5 46.134 50.876a.2.2 0 01-.01.012l-.01.01-.01.009-.014.013-.006.006-.008.009h70.456l-.023-.023a.337.337 0 01-.035-.035L90.147 26.5zM69.95 24.617L43.883 5.067v43.634l26.066-24.084zm22.71 0l26.065-19.55V48.7L92.658 24.617z" clip-rule="evenodd"></path><path d="M2.654 23.901a1.563 1.563 0 000 3.125h15.383a1.563 1.563 0 100-3.125H2.654zM24.288 25.464c0-.863.7-1.563 1.563-1.563h9.99a1.563 1.563 0 010 3.125h-9.99c-.863 0-1.563-.7-1.563-1.562zM5.373 17.876c0-.863.7-1.563 1.563-1.563h25.328a1.563 1.563 0 110 3.126H6.936c-.863 0-1.563-.7-1.563-1.563zM22.599 39.077a1.563 1.563 0 000 3.125h14.353a1.563 1.563 0 000-3.125H22.6zM.157 40.64c0-.864.7-1.563 1.562-1.563h14.354a1.563 1.563 0 010 3.125H1.719c-.863 0-1.562-.7-1.562-1.563zM15.662 31.489a1.563 1.563 0 000 3.125h16.602a1.563 1.563 0 100-3.125H15.662zM7.162 33.052c0-.864.7-1.563 1.562-1.563h.344a1.563 1.563 0 110 3.125h-.344c-.863 0-1.562-.7-1.562-1.562z"></path></svg> </div>
<h2 class="h1 email-subs-section-title">Subscribe to newsletter</h2>
<div class="email-subs-section-description">
Stay up to date! Get all the latest posts delivered straight to your inbox.
</div>
<div class="form-wrap">
<div id="mc_embed_shell">
<link href="./Tang Nano 9K_ OLED Screen 101_files/classic-061523.css" rel="stylesheet" type="text/css">
<style type="text/css">
        #mc_embed_signup{background:#fff; false;clear:left; font:14px Helvetica,Arial,sans-serif; width: 740px;}
        /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
           We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://lushaylabs.us14.list-manage.com/subscribe/post?u=d52742df004db810c0bde2d1f&amp;id=7f6265d812&amp;f_id=000480e0f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="novalidate">
<div id="mc_embed_signup_scroll">
<div class="indicates-required"><span class="asterisk">*</span> indicates required</div>
<div class="mc-field-group"><label for="mce-EMAIL">Email Address <span class="asterisk">*</span></label><input type="email" name="EMAIL" class="required email" id="mce-EMAIL" required="" value="" aria-required="true" fdprocessedid="vqb58"></div>
<div id="mce-responses" class="clear foot">
<div class="response" id="mce-error-response" style="display: none;"></div>
<div class="response" id="mce-success-response" style="display: none;"></div>
</div>
<div aria-hidden="true" style="position: absolute; left: -5000px;">
/* real people should not fill this in and expect good things - do not remove this or risk form bot signups */
<input type="text" name="b_d52742df004db810c0bde2d1f_7f6265d812" tabindex="-1" value="">
</div>
<div class="optionalParent">
<div class="clear foot">
<input type="submit" name="subscribe" id="mc-embedded-subscribe" class="button" value="Subscribe" fdprocessedid="ovuoyc">
<p class="brandingLogo" style="margin: 0px auto;"><a href="http://eepurl.com/h3_TKb" title="Mailchimp - email marketing made easy and fun"><img src="./Tang Nano 9K_ OLED Screen 101_files/branding_logo_text_dark_dtp.svg" alt="referral badge"></a></p>
</div>
</div>
</div>
</form>
</div>
<script type="text/javascript" src="./Tang Nano 9K_ OLED Screen 101_files/mc-validate.js.descarga"></script><script type="text/javascript">
(function($) {
    window.fnames = new Array(); 
    window.ftypes = new Array();
    fnames[0]='EMAIL';
    ftypes[0]='email';
    fnames[1]='FNAME';
    ftypes[1]='text';
    fnames[2]='LNAME';
    ftypes[2]='text';
    fnames[3]='ADDRESS';
    ftypes[3]='address';
    fnames[4]='PHONE';
    ftypes[4]='phone';
    fnames[5]='BIRTHDAY';
    ftypes[5]='date';
    return false
}(jQuery));
var $mcj = jQuery.noConflict(true);</script></div>
<style>
    #mc_embed_signup .button {
        background: #000;
    }
    .email-subs-wrap .form-wrap {
        padding: 4px;
    }
</style>
</div>
</div>
</div>
</section><script>
    let toc = document.querySelector('.gh-toc');
    let content = document.querySelector('.post-content');
    let body = document.querySelector('body');
    function makeTocFixed() {
        toc.classList.add('fixed-bar');
    }
    function makeTocAbsolute() {
        toc.classList.remove('fixed-bar');
    }
    function fadeTocOut() {
        toc.classList.add('fadeout');
    }
    function fadeTocIn() {
        toc.classList.remove('fadeout');
    }
    window.addEventListener('scroll', function () {
        let contentTop = content.getBoundingClientRect().top;
        let contentBottom = content.getBoundingClientRect().bottom;
        let bodyBottom = body.getBoundingClientRect().bottom;
        let menuBuffer = 100;
        if (contentTop < menuBuffer && contentBottom > bodyBottom) {
            makeTocFixed();
        } else {
            makeTocAbsolute();
        }
        if (contentBottom < menuBuffer) {
            fadeTocOut();
        } else {
            fadeTocIn();
        }
    });
</script>
<footer class="site-footer">
<div class="container">
<div class="footer-top">
<div class="row">
<div class="col-lg-5">
<div class="footer-widget widget-about">
<div class="widget-content">
<div class="footer-logo-wrap">
<a href="https://learn.lushaylabs.com/" class="logo-img theme-light-logo">
<img src="./Tang Nano 9K_ OLED Screen 101_files/logo.png" alt="Lushay Labs">
</a>
<a href="https://learn.lushaylabs.com/" class="logo-img theme-dark-logo">
<img src="./Tang Nano 9K_ OLED Screen 101_files/logo.png" alt="Lushay Labs">
</a>
</div>
<div class="site-description">
Electronics &amp; FPGA Projects
</div>
</div>
</div>
</div>
<div class="col-lg-7">
<div class="widget secondary-nav flex">
</div>
</div>
</div>
</div>
<div class="footer-bottom flex justify-space-between">
<div class="social-links-wrap flex">
<span class="title">Follow:</span>
<div tag="social-links flex">
<a href="https://twitter.com/LushayLabs" target="_blank" aria-label="twitter link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path></svg></a>
<a href="https://github.com/lushaylabs" target="_blank" aria-label="github link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a>
</div>
</div> <div class="copyright">
 2024 <a href="https://learn.lushaylabs.com/">Lushay Labs</a> - All right Reserved. Published with <a href="https://ghost.org/?via=biswajit48">Ghost</a>
</div> </div>
</div>
</footer> </div>
<div class="search-popup js-search-popup">
<div class="search-popup-bg"></div>
<a href="javascript:;" class="close-button" id="search-close" aria-label="Close search">
<svg><use xlink:href="#i-close"></use></svg>
</a>
<div class="popup-inner">
<div class="inner-container">
<form class="search-form" id="search-form">
<div class="search-form-box flex">
<input type="text" class="search-input" placeholder="Type to search" id="search-input" aria-label="Type to search" role="searchbox">
</div>
</form>
<div class="search-close-note">Press ESC to close.</div>
<div class="search-result" id="search-results"></div>
<div class="suggested-tags tag-wrap" id="suggested-tags">
<h2 class="h6">See posts by Popular tags</h2>
<div class="tag-list">
<a href="https://learn.lushaylabs.com/tag/core/">Core</a>
<a href="https://learn.lushaylabs.com/tag/graphics/">Graphics</a>
<a href="https://learn.lushaylabs.com/tag/setup/">Setup</a>
<a href="https://learn.lushaylabs.com/tag/algorithm/">Algorithm</a>
<a href="https://learn.lushaylabs.com/tag/spi/">SPI</a>
<a href="https://learn.lushaylabs.com/tag/project/">Project</a>
<a href="https://learn.lushaylabs.com/tag/hdmi/">HDMI</a>
<a href="https://learn.lushaylabs.com/tag/processor/">Processor</a>
<a href="https://learn.lushaylabs.com/tag/peripheral/">Peripheral</a>
<a href="https://learn.lushaylabs.com/tag/i2c/">I2C</a>
</div>
</div>
</div>
</div>
</div> <div class="notification notification-subscribe">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
You've successfully subscribed to Lushay Labs
</div>
<div class="notification notification-signup">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Great! Next, complete checkout to get full access to all premium content.
</div>
<div class="notification notification-signup-error error">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Error! Could not sign up. invalid link.
</div>
<div class="notification notification-signin">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Welcome back! You've successfully signed in.
</div>
<div class="notification notification-signin-error error">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Error! Could not sign in. Please try again.
</div>
<div class="notification notification-checkout">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Success! Your account is fully activated, you now have access to all content.
</div>
<div class="notification error notification-checkout-cancel">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Error! Stripe checkout failed.
</div>
<div class="notification notification-billing-update">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Success! Your billing info is updated.
</div>
<div class="notification error notification-billing-update-cancel">
<a class="notification-close" href="javascript:;" aria-label="close notification"><span class="close-icon"><svg><use xlink:href="#i-close"></use></svg></span></a>
Error! Billing info update failed.
</div> <script>
            var nextPage = '';
            var totalPages = '';
			var TweetQuoteText ='<svg><use xlink:href="#i-twitter"/></svg><span>Tweet this</span>';
        </script>
<script src="./Tang Nano 9K_ OLED Screen 101_files/app.bundle.min.js.descarga"></script>
<script src="./Tang Nano 9K_ OLED Screen 101_files/tocbot.min.js.descarga"></script>
<script>
			tocbot.init({
				// Where to render the table of contents.
				tocSelector: '.gh-toc',
				// Where to grab the headings to build the table of contents.
				contentSelector: '.post-content',
				// Which headings to grab inside of the contentSelector element.
				headingSelector: 'h1, h2, h3, h4',
				// Ensure correct positioning
				hasInnerContainers: true,
				scrollSmooth: true,
				headingsOffset: 100,
  				scrollSmoothOffset: -100
			});
		</script>

<script defer="" src="./Tang Nano 9K_ OLED Screen 101_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0RNZPL5TGV');
</script>
<script>
    setTimeout(function() {
      gtag('event', 'one_minute', {
        'app_name': 'learn',
        'screen_name': 'Learn'
      });
    }, 60*1000);
    setTimeout(function() {
      gtag('event', 'five_minutes', {
        'app_name': 'learn',
        'screen_name': 'Learn'
      });
    }, 5*60*1000);
    setTimeout(function() {
      gtag('event', 'fifteen_minutes', {
        'app_name': 'learn',
        'screen_name': 'Learn'
      });
    }, 15*60*1000);
</script>
<script src="./Tang Nano 9K_ OLED Screen 101_files/prism-core.min.js.descarga" integrity="sha512-9khQRAUBYEJDCDVP2yw3LRUQvjJ0Pjx0EShmaQjcHa6AXiOv6qHQu9lCAIR8O+/D8FtaCoJ2c0Tf9Xo7hYH01Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="./Tang Nano 9K_ OLED Screen 101_files/prism-autoloader.min.js.descarga" integrity="sha512-SkmBfuA2hqjzEVpmnMt/LINrjop3GKWqsuLSSB3e7iBmYK7JuWw4ldmmxwD9mdm2IRTTi0OxSAfEGvgEi0i2Kw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<style>
		.post-card .post-excerpt {
			margin-bottom: 24px;
			height: auto;
			overflow: hidden;
			display: -webkit-box;
			-webkit-line-clamp: 3;
			-webkit-box-orient: vertical;
		}
	</style>
<div id="sodo-search-root"></div><deepl-input-controller><template shadowrootmode="open"><link rel="stylesheet" href="chrome-extension://cofdbpoegempjloogbagkncekinflcnj/build/content.css"><div><div class="dl-input-translation-container svelte-ju4595"><div></div></div></div></template></deepl-input-controller><script id="mimi-processing-content-script" src="chrome-extension://ingkkggaggkbgnejpbblmbpodgmiojbo/content.bundle.js"></script><span id="PING_IFRAME_FORM_DETECTION" style="display: none;"></span></body></html>